<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Idle Balls (MOD)</title>
  <style>
    body { margin: 0; padding: 0; font-family: sans-serif; text-align: center; background: #f0f8ff; }
    #game { position: relative; width: 100%; height: 60vh; max-height: 600px; margin: auto; background: #ffffff; overflow: hidden; }
    .circle { position: absolute; width: 60px; height: 60px; border-radius: 50%; display: flex;
      align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 14px;
      user-select: none; cursor: pointer;
    }
    .info { margin: 20px 0; }
    button { padding: 10px 20px; font-size: 16px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Idle Ballsé¢¨ã‚²ãƒ¼ãƒ </h1>
  <div class="info">
    <div>ãƒã‚¤ãƒ³ãƒˆ: <span id="points">0</span></div>
    <div>æ”»æ’ƒåŠ›: <span id="attackPower">1</span></div>
    <div>ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆ: <span id="upgradeCost">10</span></div>
    <button onclick="upgradeAttack()">ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰</button>
  </div>
  <div id="game"></div>

  <script>
let gks = `<h1>d</h1>`;
    // ãƒ¦ãƒ‹ãƒƒãƒˆç”Ÿæˆ (a~z, aa~zz, aaa~zzz)
    function generateUnits() {
      const chars = 'abcdefghijklmnopqrstuvwxyz';
      const units = ['', 'k', 'm', 'b', 't', 'q', 'Q', 's', 'S', 'o', 'O', 'n', 'N', 'd', 'D', 'u', 'U', 'p', 'P', 'g', 'G', 'h', 'H', 'l', 'L', 'i', 'I', 'j', 'J', 'c', 'C', 'w', 'W', 'x', 'X', 'y', 'Y', 'z', 'Z', 'XX', 'YY', 'ZZ', 'ND', 'SS', 'NN', 'wX', '!', '!!', '?', '??', '!?', '?!', '!!!', '???', 'Gc', 'CC', 'ZN', 'Un', 'Ad', 'â–¡', 'â– ', 'â—‹', 'â—', 'â—‡', 'â—†', 'â–³', 'â–²', 'â–½', 'â–¼', 'â–¦', 'âˆ', 'XS', 'âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…', 'â™•', 'â™›', 'â™–', 'â™œ', 'â™—', 'â™', 'â™˜', 'â™', 'â™™', 'â™Ÿ', 'â˜ ', 'â˜»', 'â˜…', 'âœ«', 'â˜°', 'â˜·', 'â˜²', 'â˜µ', 'â˜¶', 'â˜³', 'â˜´', 'â˜±', 'â˜©', 'â‡”', 'âœ¤', 'âœ¿', 'â€', 'ğ–¡—', 'ê•¥', 'â•¬', 'âˆµ', 'Zz', 'Qd', 'Qi', 'LL', 'WW', 'XC', 'DD', 'iii', 'III', 'UU', 'Yn', 'Vi', 'ã‚', 'ã„', 'ã†', 'ãˆ', 'ãŠ', 'ã‹', 'ã', 'ã', 'ã‘', 'ã“', 'ã•', 'ã—', 'pO', 'HW', 'EE', 'Gt', 'âˆ†', 'Â©', 'ã€„', 'JN', 'Dâ—‹', 'â—˜', 'â—˜â—˜', 'â—˜â—˜â—˜', 'BY', 'Yy', 'NL', 'UI', 'IU', 'gS', 'n', 'N', 'iO', 'Gh', 'âˆ«', 'âˆ¬', 'âˆ«âˆ«', 'â‚ª', 'Â¤', 'â‚ ', 'âœ¡', 'âœ£', 'âœ¾', 'â†', 'âœ³', 'â™¡', 'â™¤', 'â™¢', 'â™§', 'â—', 'âœ–', 'â—', 'â—‘', 'âœ', 'áƒ¦', 'âœ†', 'â™¯', 'â˜¼', 'Â®', 'Å¡', 'Å ', 'Ö', 'Ö', 'à¬', 'JJ', 'VIC', 'H!', 'N!', 'U!', 'â£¿', 'â§‡', 'â§º', 'â§»', 'CCC', 'à¿Š', 'à¿‹', 'à¿Œ', 'â§²', 'â§³', 'â¨Œ', 'â¨•', 'â¨–', 'â¨˜', 'â¨·', 'â¨¸', 'â©¨', 'â©©', 'â–¢', 'â–¤', 'â–¥', 'â–§', 'â–¨', 'â–©', 'â—™', 'â—š', 'â—›', 'â—´', 'â—µ', 'â—¶', 'â—·', 'â˜ª', 'â˜«', 'â˜¬', 'â˜¹', 'ğ„¡', 'ğ„ ', 'ğ„ª', 'XP', 'XD', 'XYZ', 'ğ‡›', 'ğœ•', 'ğ“‚', 'ğ“‹', 'ğ“', 'ğ“¿', 'ğ”˜³', 'ğ”˜’', 'ğ”—²', 'ğ”—¢', 'ğ”— ', 'ğ”—¡', 'ğ”—ª', 'ğ”—¬', 'ğ–¦˜', 'ğ–¦§', 'ğ–¥¸', 'ğ–¥Ÿ', 'ğ–¤“', 'ğ–¤…', 'ğ–£˜', 'ğ–£', 'ğ–£¥', 'ğ–¢°', 'ğ–¢«', 'ğ–«¤', 'ğ–«–', 'ğ–¬»', 'ã™', 'ã›', 'ã', 'ãŸ', 'ã¡', 'ã¤', 'ã¦', 'ã¨', 'ãª', 'ã«', 'ã¬', 'ã­', 'ã®', 'ã¯', 'ã²', 'ãµ', 'ã¸', 'ã»', 'ã¾', 'ã¿', 'ã‚€', 'ã‚', 'ã‚‚', 'ã‚„', 'ã‚†', 'ã‚ˆ', 'ã‚‰', 'ã‚Š', 'ã‚‹', 'ã‚Œ', 'ã‚', 'ã‚', 'ã‚', 'ã‚”', 'ã‚‘', 'ã‚’', 'ã‚“', 'ãŒ', 'ã', 'ã', 'ã’', 'ã”', 'ã–', 'ã˜', 'ãš', 'ãœ', 'ã', 'ã ', 'ã¢', 'ã¥', 'ã§', 'ã©', 'ã°', 'ã³', 'ã¶', 'ã¹', 'ã¼', 'ã', 'ãƒ', 'ã…', 'ã‡', 'ã‰', 'ã£', 'ã‚ƒ', 'ã‚…', 'ã‚‡', 'YS', 'ZS', 'NNN', 'NNP', 'DX', 'BTS', 'STB', 'NOT', 'ğŸ€†', 'ğŸ€‘', 'ğŸ€’', 'ğŸ€“', 'ğŸ€”', 'ğŸ€•', 'ğŸ€–', 'ğŸ€—', 'ğŸ€˜', 'ğŸ€«', 'ğŸ€™', 'ğŸ€š', 'ğŸ€›', 'ğŸ€œ', 'ğŸ€', 'ğŸ€', 'ğŸ€Ÿ', 'ğŸ€ ', 'ğŸ€¡', 'ğŸ€†ğŸ€†', 'ğŸ€ ğŸ€ ', 'ğŸ€¦',  'ğŸ€§', 'ğŸ€¨', 'ğŸ€©', 'ABC', 'ç§çµ„çµµ', 'â†€', 'â†', 'â†‚', 'â†‡', 'â†ˆ', 'â‡ª', 'â‡«', 'â‡¬', 'â‡­', 'â‡®', 'â‰ˆ', 'â‰‰', 'â‰‹', 'â‰', 'â‰', 'â‰‘', 'â‰’', 'â‰“', 'â‰–', 'â‰¡', 'â‰£', 'â‰ ', 'â‰­', 'âŠ', 'âŠ•', 'âŠ–', 'âŠ—', 'âŠ˜', 'âŠ™', 'âŠš', 'âŠœ', 'âŠŸ', 'âŠ ', 'âŠ¡', 'â‹’', 'â‹“', 'â‹•', 'â‹‡', 'â‹®', 'âŒ¸', 'âŒ¹', 'âŒº', 'âŒ»', 'âŒ¼', 'âŒ½', 'âŒ¾', 'â', 'â‚', 'â‡', 'âˆ', 'âŒ', 'â', 'â‰', 'â£', 'â¤', 'â ', 'âŸ', 'â¯', 'â•', 'âˆ', 'â…', 'âƒ', 'â‚', 'â­', 'â©', 'âª', 'â«', 'â¬', 'â€', 'â', 'â‚', 'âƒ', 'â„', 'â¢', 'â¦', 'â¤', 'â¥', 'â‘€', 'â‘', 'â‘‚', 'â‘ƒ', 'â‘„', 'â‘…', 'â‘†', 'â‘‡', 'â‘Š', 'â‘ˆ', 'â‘‰', 'â•³', 'â–€', 'â–', 'â–‚', 'â–ƒ', 'â–„', 'â–…', 'â–†', 'â–‡', 'â–ˆ', 'â–‰', 'â–Š', 'â–‹', 'â–Œ', 'â–', 'â–', 'â–', 'â–', 'â–‘', 'â–’', 'â–“', 'â–”', 'â––', 'â–˜', 'â–™', 'â–Ÿ', 'â–', 'â–š', 'â–›', 'â–œ', 'â˜¦', 'â˜˜', 'â˜¤', 'â˜£', 'â˜¢', 'â™³', 'â™´', 'â™µ', 'â™¶', 'â™·', 'â™¸', 'â™¹', 'â™º', 'â™²', 'â™»', 'â™½', 'â™¼', 'â™¾', 'âš†', 'âš‡', 'âšˆ', 'âš‰', 'âšŠ', 'âš‹', 'âšŒ', 'âš', 'âš', 'âš', 'âš’', 'âš”', 'âš•', 'âš–', 'âš™', 'âšš', 'âš›', 'âšœ', 'âš', 'âš ', 'âš¡', 'âš¢', 'âš£', 'âš¤', 'âš¥', 'âš¦', 'âš§', 'âš¨', 'âš©', 'âš­', 'âš®', 'âš¯', 'â›€', 'â›', 'â›‚', 'â›ƒ', 'â›†', 'â›‡', 'â›’', 'â›‹', 'â›Œ', 'â›', 'â›', 'â›“', 'â›•', 'â›—', 'â›–', 'â›˜', 'â›š', 'â››', 'â›œ', 'â›', 'â›', 'â›Ÿ', 'â› ', 'â›¡', 'â›¢', 'â›£', 'â›¤', 'â›¥', 'â›¦', 'â›§', 'â›¨', 'â›©', 'â›«', 'â›¬', 'â›­', 'â›®', 'â›¯', 'â›°', 'â›·', 'â›´', 'â›¶', 'â›¹', 'â›¸', 'â›¼', 'â›»', 'â›¾', 'â›¿', 'âœ‚', 'âœ„', 'âœ‘', 'âœ’', 'âœ¶', 'âœ·', 'âœ¸', 'âœ¹', 'âœº', 'âœ»', 'âœ¼', 'âœ½', 'âœ¾', 'â', 'â‚', 'âƒ', 'â…', 'â†', 'â‡', 'âˆ', 'â‰', 'âŠ', 'â‹', 'â', 'â', 'â', 'â‘', 'â’', 'â–', 'â˜', 'â™', 'âš', 'â', 'â', 'â¢', 'â£', 'â¥', 'â¦', 'â§', 'â˜', 'â™', 'âš', 'â›', 'âœ']; // 1æ–‡å­—ã‹ã‚‰3æ–‡å­—ã¾ã§
      for (let len = 2; len <= 5; len++) {
        (function build(prefix, depth) {
          if (depth === 0) units.push(prefix);
          else for (const c of chars) build(prefix + c, depth - 1);
        })('', len);
      }
      return units;
    }
    const UNITS = generateUnits();

    // BigInt ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
    function formatBigIntNumber(value) {
      const thousand = 1000n;
      let unitIndex = 0;
      let current = value;
      while (current >= thousand && unitIndex < UNITS.length - 1) {
        current /= thousand;
        unitIndex++;
      }
      const divisor = thousand ** BigInt(unitIndex);
      const whole = value / divisor;
      const decimal = (value * 10n / divisor) % 10n;
      return `${whole}.${decimal}${UNITS[unitIndex]}`;


    }

    // ã‚²ãƒ¼ãƒ å¤‰æ•°
    let points = BigInt(1000000000000000000000000000000000000000000000000000004848485853838484848484485758484838485843848584848482883583738847547473737474848448484844848484484383838383838373733838374747477447744477371000000000000000000000000000000000000000000000000000004848485853838484848484485758484838485843848584848482883583738847547473737474747474432924792749242792694469244962466429692419662496246299624629624792224694292496229644264924296421496264942962488388383733773737373737811000000000494499484484848448438383838383837373383837474747744774447737100000000000000000000000000000000000000000000000000000484848585383848484848448575848483848584384858484848288358373884754747373747474747443292479274924279269446924496246642969241966249624629962462962479222469429249622964426492429642149626494296248838838373377373737373781100000000049449948448484844843838383838383737338383747474774477444773710000000000000000000000000000000000000000000000000000048484858538384848484844857584848384858438485848484828835837388475474737374747474744329247927492427926944692449624664296924196624962462996246296247922246942924962296442649242964214962649429624883883837337737373737378110000000004944994844848484484383838383838373733838374747477447744477371000000000000000000000000000000000000000000000000000004848485853838484848484485758484838485843848584848482883583738847547473737474747474432924792749242792694469244962466429692419662496246299624629624792224694292496229644264924296421496264942962488388383733773737373737811000000000494499484484848448438383838383837373383837474747744774447737100000000000000000000000000000084844848484484848448438383838383837373383837474747744774447737247269297429724929624548484844848484484848448438383838383837373383837474747744774447737n);
    let attackPower = BigInt(1n);
    let upgradeCost = 10n;
    let stage = 1;
    let circles = [];
    const ATTACK_NUM = 3n, ATTACK_DEN = 2n;
    const COST_NUM = 17n, COST_DEN = 10n;

    function getColor(hp, maxHp) {
      const pct = Number(hp * 100n / maxHp);
      if (pct > 80) return 'red';
      if (pct > 60) return 'orange';
      if (pct > 40) return 'yellow';
      if (pct > 20) return 'greenyellow';
      return 'lightblue';
    }

    function createCircles() {
      const game = document.getElementById('game');
      game.innerHTML = '';
      circles = [];
      const baseHP = 10n * BigInt(Math.floor(1.7 ** (stage - 1)));
      const rect = game.getBoundingClientRect();
      for (let i = 0; i < 10; i++) {
        circles.push({ hp: baseHP, maxHp: baseHP });
        const div = document.createElement('div');
        div.className = 'circle';
        const size = 60;
        const x = Math.random() * (rect.width - size);
        const y = Math.random() * (rect.height - size);
        div.style.left = `${x}px`;
        div.style.top = `${y}px`;
        div.onclick = () => attack(i);
        game.appendChild(div);
      }
      renderCircles();
    }

    function renderCircles() {
      const game = document.getElementById('game');
      circles.forEach((c, i) => {
        const el = game.children[i];
        if (c.hp <= 0n) el.style.display = 'none';
        else {
          el.style.display = 'flex';
          el.style.background = getColor(c.hp, c.maxHp);
          el.textContent = formatBigIntNumber(c.hp);
        }
      });
    }

    function attack(index) {
      const c = circles[index]; if (c.hp <= 0n) return;
      const dmg = c.hp < attackPower ? c.hp : attackPower;
      c.hp -= dmg;
      points += dmg;
      if (circles.every(x => x.hp <= 0n)) {
        stage++;
        createCircles();
      } else renderCircles();
      updateUI();
    }

    function upgradeAttack() {
      if (points >= upgradeCost) {
        points -= upgradeCost;
        attackPower = (attackPower * ATTACK_NUM + ATTACK_DEN - 1n) / ATTACK_DEN;
        upgradeCost = upgradeCost * COST_NUM / COST_DEN;
        updateUI();
      }
    }

    function updateUI() {
      document.getElementById('points').textContent = formatBigIntNumber(points);
      document.getElementById('attackPower').textContent = formatBigIntNumber(attackPower);
      document.getElementById('upgradeCost').textContent = formatBigIntNumber(upgradeCost);
    }

    window.addEventListener('resize', () => createCircles());
    createCircles(); updateUI();
  </script>
</body>
<h5>BigInt(1000000000000000000000000000000000000000000000000000004848485853838484848484485758484838485843848584848482883583738847547473737474747474432924792749242792694469244962466429692419662496246299624629624792224694292496229644264924296421496264942962488388383733773737373737811000000000494499585859598388383838337373738383373832792927479227494729429297247269297429724929624548484844848484484848448438383838383837373383837474747744774447737n)</h5>
</html>
